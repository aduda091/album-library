(this["webpackJsonpbornfight-album-frontend"]=this["webpackJsonpbornfight-album-frontend"]||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);a(96),a(110),a(112),a(114),a(124),a(125),a(130),a(132);var n=a(0),r=a.n(n),c=a(91),l=a.n(c),i=a(13),s=a(1),o=a(94),m=a(52),u=a(92),f={baseURL:"https://albums-mock-backend.glitch.me"},v=a.n(u).a.create({baseURL:f.baseURL}),b=Object(n.createContext)({albums:[],searchTerm:"",toggleFavorite:function(e){}}),d=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],f=s[1];return r.a.createElement(b.Provider,{value:{albums:c,setAlbums:l,searchTerm:u,setSearchTerm:f,toggleFavorite:function(e){var t=Object(o.a)(c),a=c.findIndex((function(t){return t.id===e})),n=!c[a].favorite,r="".concat("/albums","/").concat(e);v.patch(r,{favorite:n}).then((function(e){t[a].favorite=e.data.favorite,l(t)})).catch((function(e){console.error(e)}))}}},e.children)};a(156);var E=function(){var e=Object(n.useContext)(b),t=e.searchTerm,a=e.setSearchTerm;return r.a.createElement("div",{className:"search-container"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{type:"text",placeholder:"Search",onChange:function(e){return a(e.target.value)},value:t})))};a(157);var h=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"inner-container"},r.a.createElement("h1",{className:"page-title"},r.a.createElement(i.b,{to:"/",title:"Home"},e.title)),e.hasSearch?r.a.createElement(E,{onSearchChange:e.onSearchChange}):null))};a(162),a(163);var N=function(e){var t=Object(n.useContext)(b).toggleFavorite,a=e.favorite?r.a.createElement("button",{className:"remove-favorite",onClick:function(){return t(e.id)}},"Remove favorite"):r.a.createElement("button",{className:"add-favorite",onClick:function(){return t(e.id)}},"Mark as favorite");return r.a.createElement("div",{className:"album-item"},r.a.createElement("div",{className:"album-main-info"},r.a.createElement("div",{className:"album-cover-container".concat(e.favorite?" has-star":"")},r.a.createElement("img",{src:e.imageUrl,alt:"".concat(e.title," album cover."),className:"album-cover"})),r.a.createElement("div",{className:"name-title-container"},r.a.createElement("div",{className:"album-title"},e.title),r.a.createElement(i.b,{to:"".concat("/artist","/").concat(e.artistId),title:"View all albums from ".concat(e.artistName),className:"album-artist"},e.artistName))),r.a.createElement("div",{className:"year-info"},r.a.createElement("span",{className:"year-label"},"Released: "),r.a.createElement("span",{className:"year-value"},new Date(e.releaseDate).getFullYear())),r.a.createElement("div",{className:"price"},e.price),r.a.createElement("div",{className:"favorite-container"},a))};var g=function(e){return r.a.createElement("div",{className:"album-container"},e.albums.map((function(e){return r.a.createElement(N,Object.assign({key:e.id},e,{artistName:e.artist.title}))})))};a(164);var p=function(){var e=Object(s.f)().search,t=Object(n.useContext)(b),a=t.albums,c=t.setAlbums,l=t.searchTerm;return Object(n.useEffect)((function(){var t=function(e,t){var a=new URLSearchParams(e),n=parseInt(a.get("limit"))||10,r=t.length?"&q=".concat(t):"";return"".concat("/albums?_expand=artist","&_limit=").concat(n).concat(r)}(e,l);v.get(t).then((function(e){c(e.data)})).catch((function(e){console.error(e)}))}),[l,e,c]),r.a.createElement("div",null,r.a.createElement(h,{title:"Album list",hasSearch:!0}),a.length?r.a.createElement(g,{albums:a}):r.a.createElement("div",{className:"no-results"},"No results found for ",r.a.createElement("span",{className:"search-term"},l)))};var j=function(){var e=Object(s.g)().artistId,t=Object(n.useContext)(b).albums.filter((function(t){return t.artistId===Number(e)}));if(t.length){console.log(t);var a=t[0].artist.title;return r.a.createElement("div",null,r.a.createElement(h,{title:a}),r.a.createElement(g,{albums:t}))}return r.a.createElement("div",null,r.a.createElement(h,{title:"Unknown artist"}),r.a.createElement("div",{className:"no-results"},"No results found for artist with ID of ",r.a.createElement("strong",null,e)))};var O=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/artist/:artistId",component:j}),r.a.createElement(s.a,{path:"/",component:p})))};a(165);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d,null,r.a.createElement(i.a,null,r.a.createElement(O,null)))),document.getElementById("root"))},95:function(e,t,a){e.exports=a(166)}},[[95,1,2]]]);
//# sourceMappingURL=main.93831379.chunk.js.map