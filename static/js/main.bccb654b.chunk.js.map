{"version":3,"sources":["context/albums/albumsContext.js","components/Search/index.jsx","components/Header/index.jsx","constants/routes.js","components/AlbumItem/index.jsx","components/AlbumContainer/index.jsx","components/LoadingSpinner/index.jsx","pages/Home/index.jsx","pages/Artist/index.jsx","App.jsx","context/albums/albumsReducer.js","context/types.js","axios/index.js","config/index.js","utils/index.js","constants/api.js","context/albums/AlbumsState.js","index.jsx","components/Header/index.module.scss","components/AlbumItem/index.module.scss","pages/Home/index.module.scss","components/Search/index.module.scss","components/AlbumContainer/index.module.scss","components/LoadingSpinner/index.module.scss"],"names":["albumsContext","createContext","Search","useContext","AlbumsContext","searchTerm","setSearchTerm","className","classNames","searchContainer","onSubmit","event","preventDefault","type","placeholder","onChange","target","value","Header","props","header","innerContainer","pageTitle","to","title","hasSearch","onSearchChange","AlbumItem","toggleFavorite","resolveFavoriteCta","favorite","removeFavorite","onClick","id","addFavorite","albumCoverContainerClasses","albumCoverContainer","push","hasStar","albumItem","albumMainInfo","join","src","imageUrl","alt","albumCover","nameTitleContainer","albumTitle","artistId","artistName","albumArtist","yearInfo","yearLabel","yearValue","Date","releaseDate","getFullYear","price","favoriteContainer","AlbumContainer","albumContainer","albums","map","album","key","artist","LoadingSpinner","class","loader","Home","urlParams","useLocation","search","fetchAlbums","loading","useEffect","length","noResults","Artist","useParams","currentArtistAlbums","filter","Number","resolveContent","App","path","component","state","action","payload","activeConfig","baseURL","axiosInstance","axios","create","resolveApiUrl","searchParams","URLSearchParams","limit","parseInt","get","query","AlbumsState","useReducer","AlbumsReducer","dispatch","a","setLoading","url","res","data","Provider","term","albumId","updatedAlbums","albumIndex","findIndex","newFavoriteStatus","patch","then","catch","err","console","error","children","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.bccb654b.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nconst albumsContext = createContext();\r\n\r\nexport default albumsContext;\r\n","import React, { useContext } from \"react\";\r\n\r\nimport AlbumsContext from \"../../context/albums/albumsContext\";\r\n\r\nimport classNames from  \"./index.module.scss\";\r\n\r\nfunction Search() {\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const { searchTerm, setSearchTerm } = albumsContext;\r\n\r\n    return (\r\n        <div className={classNames.searchContainer}>\r\n            <form onSubmit={(event) => event.preventDefault()}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search\"\r\n                    onChange={(event) => setSearchTerm(event.target.value)}\r\n                    value={searchTerm}\r\n                />\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Search from \"../Search\";\r\n\r\nimport * as routes from \"../../constants/routes\";\r\n\r\nimport classNames from \"./index.module.scss\";\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <div className={classNames.header}>\r\n            <div className={classNames.innerContainer}>\r\n                <h1 className={classNames.pageTitle}>\r\n                    <Link to={routes.HOME} title=\"Home\">\r\n                        {props.title}\r\n                    </Link>\r\n                </h1>\r\n                {props.hasSearch ? (\r\n                    <Search onSearchChange={props.onSearchChange} />\r\n                ) : null}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nHeader.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    hasSearch: PropTypes.bool,\r\n    onSearchChange: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","export const HOME = \"/\";\r\nexport const ARTIST_ROOT = \"/artist\";\r\nexport const ARTIST = \"/artist/:artistId\";\r\n","import React, { useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport * as routes from \"../../constants/routes\";\r\n\r\nimport AlbumsContext from \"../../context/albums/albumsContext\";\r\n\r\nimport classNames from \"./index.module.scss\";\r\n\r\nfunction AlbumItem(props) {\r\n    const toggleFavorite = useContext(AlbumsContext).toggleFavorite;\r\n\r\n    const getYear = () => {\r\n        return new Date(props.releaseDate).getFullYear();\r\n    };\r\n\r\n    const resolveFavoriteCta = props.favorite ? (\r\n        <button\r\n            className={classNames.removeFavorite}\r\n            onClick={() => toggleFavorite(props.id)}\r\n        >\r\n            Remove favorite\r\n        </button>\r\n    ) : (\r\n        <button\r\n            className={classNames.addFavorite}\r\n            onClick={() => toggleFavorite(props.id)}\r\n        >\r\n            Mark as favorite\r\n        </button>\r\n    );\r\n\r\n    const albumCoverContainerClasses = [classNames.albumCoverContainer];\r\n    props.favorite && albumCoverContainerClasses.push(classNames.hasStar);\r\n\r\n    return (\r\n        <div className={classNames.albumItem}>\r\n            <div className={classNames.albumMainInfo}>\r\n                <div\r\n                    className={albumCoverContainerClasses.join(\" \")}\r\n                >\r\n                    <img\r\n                        src={props.imageUrl}\r\n                        alt={`${props.title} album cover.`}\r\n                        className={classNames.albumCover}\r\n                    />\r\n                </div>\r\n                <div className={classNames.nameTitleContainer}>\r\n                    <div className={classNames.albumTitle}>{props.title}</div>\r\n\r\n                    <Link\r\n                        to={`${routes.ARTIST_ROOT}/${props.artistId}`}\r\n                        title={`View all albums from ${props.artistName}`}\r\n                        className={classNames.albumArtist}\r\n                    >\r\n                        {props.artistName}\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={classNames.yearInfo}>\r\n                <span className={classNames.yearLabel}>Released: </span>\r\n                <span className={classNames.yearValue}>{getYear()}</span>\r\n            </div>\r\n\r\n            <div className={classNames.price}>{props.price}</div>\r\n\r\n            <div className={classNames.favoriteContainer}>{resolveFavoriteCta}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nAlbumItem.propTypes = {\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    price: PropTypes.string,\r\n    imageUrl: PropTypes.string,\r\n    releaseDate: PropTypes.string,\r\n    favorite: PropTypes.bool,\r\n    artistId: PropTypes.number,\r\n    artistName: PropTypes.string,\r\n};\r\n\r\nexport default AlbumItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport AlbumItem from \"../AlbumItem\";\r\n\r\nimport classNames from \"./index.module.scss\";\r\n\r\nfunction AlbumContainer(props) {\r\n    const renderAlbums = () => {\r\n        return props.albums.map((album) => (\r\n            <AlbumItem\r\n                key={album.id}\r\n                {...album}\r\n                artistName={album.artist.title}\r\n            />\r\n        ));\r\n    };\r\n    return <div className={classNames.albumContainer}>{renderAlbums()}</div>;\r\n}\r\n\r\nAlbumContainer.propTypes = {\r\n    albums: PropTypes.array,\r\n};\r\n\r\nexport default AlbumContainer;\r\n","import React from \"react\";\r\n\r\nimport classNames from \"./index.module.scss\";\r\n\r\nfunction LoadingSpinner() {\r\n    return <div class={classNames.loader}>Loading...</div>;\r\n}\r\n\r\nexport default LoadingSpinner;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport AlbumsContext from \"../../context/albums/albumsContext\";\r\n\r\nimport Header from \"../../components/Header\";\r\nimport AlbumContainer from \"../../components/AlbumContainer\";\r\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\r\n\r\nimport classNames from  \"./index.module.scss\";\r\n\r\nfunction Home() {\r\n    const urlParams = useLocation().search;\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const { albums, searchTerm, fetchAlbums, loading } = albumsContext;\r\n\r\n    useEffect(() => {\r\n        fetchAlbums(urlParams);\r\n        //eslint-disable-next-line\r\n    }, [searchTerm]);\r\n\r\n    const resolveContent = () => {\r\n        if (loading) return <LoadingSpinner />;\r\n\r\n        return albums.length ? (\r\n            <AlbumContainer albums={albums} />\r\n        ) : (\r\n            <div className={classNames.noResults}>\r\n                No results found for{\" \"}\r\n                <span className={classNames.searchTerm}>{searchTerm}</span>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Header title=\"Album list\" hasSearch />\r\n            {resolveContent()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport AlbumsContext from \"../../context/albums/albumsContext\";\r\n\r\nimport Header from \"../../components/Header\";\r\nimport AlbumContainer from \"../../components/AlbumContainer\";\r\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\r\n\r\nfunction Artist() {\r\n    const { artistId } = useParams();\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const { albums, fetchAlbums, loading } = albumsContext;\r\n\r\n    useEffect(() => {\r\n        if (albums.length === 0) {\r\n            fetchAlbums();\r\n        }\r\n        //eslint-disable-next-line\r\n    }, []);\r\n\r\n    const currentArtistAlbums = albums.filter(\r\n        (album) => album.artistId === Number(artistId),\r\n    );\r\n\r\n    const resolveContent = () => {\r\n        if (loading) return <LoadingSpinner />;\r\n\r\n        if (currentArtistAlbums.length) {\r\n            const artistName = currentArtistAlbums[0].artist.title;\r\n            return (\r\n                <div>\r\n                    <Header title={artistName} />\r\n                    <AlbumContainer albums={currentArtistAlbums} />\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Header title=\"Unknown artist\" />\r\n                    <div className=\"no-results\">\r\n                        No results found for artist with ID of{\" \"}\r\n                        <strong>{artistId}</strong>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    return resolveContent();\r\n}\r\n\r\nexport default Artist;\r\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport Home from \"./pages/Home\";\nimport Artist from \"./pages/Artist\";\n\nimport * as routes from \"./constants/routes\";\n\nfunction App() {\n    return (\n        <div className=\"app\">\n            <Switch>\n                <Route path={routes.ARTIST} component={Artist} />\n                <Route path={routes.HOME} component={Home} />\n            </Switch>\n        </div>\n    );\n}\n\nexport default App;\n","import * as types from \"../types\";\r\n\r\nexport default (state, action) => {\r\n    switch (action.type) {\r\n        case types.SET_ALBUMS:\r\n            return {\r\n                ...state,\r\n                albums: action.payload,\r\n                loading: false,\r\n            };\r\n        case types.SET_LOADING:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n            };\r\n        case types.SET_SEARCH_TERM:\r\n            return {\r\n                ...state,\r\n                searchTerm: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const SET_ALBUMS = \"SET_ALBUMS\";\r\nexport const TOGGLE_FAVORITE = \"TOGGLE_FAVORITE\";\r\nexport const SET_SEARCH_TERM = \"SET_SEARCH_TERM\";\r\nexport const SET_LOADING = \"SET_LOADING\";\r\n","import axios from \"axios\";\r\nimport config from \"../config\";\r\n\r\nconst activeConfig = config[process.env.NODE_ENV];\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: activeConfig.baseURL,\r\n});\r\n\r\nexport default axiosInstance;\r\n","export default {\r\n    development: {\r\n        baseURL: \"http://localhost:3004\",\r\n    },\r\n    production: {\r\n        baseURL: \"https://albums-mock-backend.glitch.me\",\r\n    },\r\n};\r\n","import * as api from \"../constants/api\";\r\n\r\nconst DEFAULT_LIMIT = 10;\r\n\r\nconst resolveApiUrl = (urlParams, searchTerm) => {\r\n    const searchParams = new URLSearchParams(urlParams);\r\n    const limit = parseInt(searchParams.get(\"limit\")) || DEFAULT_LIMIT;\r\n\r\n    const query = searchTerm.length ? `&q=${searchTerm}` : \"\";\r\n\r\n    return `${api.ALBUMS}&_limit=${limit}${query}`;\r\n};\r\n\r\nexport { resolveApiUrl };\r\n","export const ALBUMS = \"/albums?_expand=artist\";\r\nexport const FAVORITE = \"/albums\";\r\n","import React, { useReducer } from \"react\";\r\n\r\nimport AlbumsContext from \"./albumsContext\";\r\nimport AlbumsReducer from \"./albumsReducer\";\r\nimport axios from \"../../axios\";\r\nimport * as api from \"../../constants/api\";\r\nimport { resolveApiUrl } from \"../../utils\";\r\n\r\nimport * as types from \"../types\";\r\n\r\nconst AlbumsState = (props) => {\r\n    const initialState = {\r\n        albums: [],\r\n        searchTerm: \"\",\r\n        loading: false,\r\n    };\r\n\r\n    const [state, dispatch] = useReducer(AlbumsReducer, initialState);\r\n\r\n    // Fetch albums\r\n    const fetchAlbums = async (urlParams) => {\r\n        setLoading();\r\n        const url = resolveApiUrl(urlParams, state.searchTerm);\r\n        const res = await axios.get(url);\r\n\r\n        dispatch({\r\n            type: types.SET_ALBUMS,\r\n            payload: res.data,\r\n        });\r\n    };\r\n\r\n    // Set search\r\n    const setSearchTerm = (term) =>\r\n        dispatch({ type: types.SET_SEARCH_TERM, payload: term });\r\n\r\n    // Toggle favorite\r\n    const toggleFavorite = (albumId) => {\r\n        const updatedAlbums = [...state.albums];\r\n        const albumIndex = state.albums.findIndex(\r\n            (album) => album.id === albumId,\r\n        );\r\n        const newFavoriteStatus = !state.albums[albumIndex].favorite;\r\n\r\n        const url = `${api.FAVORITE}/${albumId}`;\r\n        axios\r\n            .patch(url, { favorite: newFavoriteStatus })\r\n            .then((res) => {\r\n                updatedAlbums[albumIndex].favorite = res.data.favorite;\r\n                dispatch({\r\n                    type: types.SET_ALBUMS,\r\n                    payload: updatedAlbums,\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n            });\r\n    };\r\n\r\n    // Set loading\r\n    const setLoading = () => dispatch({ type: types.SET_LOADING });\r\n\r\n    return (\r\n        <AlbumsContext.Provider\r\n            value={{\r\n                albums: state.albums,\r\n                searchTerm: state.searchTerm,\r\n                loading: state.loading,\r\n                fetchAlbums,\r\n                setSearchTerm,\r\n                toggleFavorite,\r\n            }}\r\n        >\r\n            {props.children}\r\n        </AlbumsContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AlbumsState;\r\n","import \"./utils/polyfills\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport App from \"./App\";\nimport AlbumsState from \"./context/albums/AlbumsState\";\n\nimport \"./index.scss\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <AlbumsState>\n            <BrowserRouter>\n                <App />\n            </BrowserRouter>\n        </AlbumsState>\n    </React.StrictMode>,\n    document.getElementById(\"root\"),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1b8vH\",\"innerContainer\":\"Header_innerContainer__2MUd_\",\"pageTitle\":\"Header_pageTitle__2OpDX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"albumItem\":\"AlbumItem_albumItem__1bIab\",\"albumMainInfo\":\"AlbumItem_albumMainInfo__3V5zC\",\"albumCoverContainer\":\"AlbumItem_albumCoverContainer__-Qfn6\",\"hasStar\":\"AlbumItem_hasStar__14kIj\",\"albumCover\":\"AlbumItem_albumCover__2dW2C\",\"albumTitle\":\"AlbumItem_albumTitle__Ezlpl\",\"albumArtist\":\"AlbumItem_albumArtist__IwOaE\",\"yearInfo\":\"AlbumItem_yearInfo__3fxGh\",\"yearLabel\":\"AlbumItem_yearLabel__2tgts\",\"price\":\"AlbumItem_price__2hGyi\",\"favoriteContainer\":\"AlbumItem_favoriteContainer__zn3XP\",\"addFavorite\":\"AlbumItem_addFavorite__11Ep7\",\"removeFavorite\":\"AlbumItem_removeFavorite__1Y6dG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noResults\":\"Home_noResults__PUYz5\",\"searchTerm\":\"Home_searchTerm__MJFBn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"Search_searchContainer__2NAis\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"albumContainer\":\"AlbumContainer_albumContainer__1W6Nj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"LoadingSpinner_loader__2C9Jc\",\"load8\":\"LoadingSpinner_load8__eqU78\"};"],"sourceRoot":""}