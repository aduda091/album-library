{"version":3,"sources":["axios/index.js","config/index.js","context/albums/albumsContext.js","constants/api.js","components/Search/index.jsx","components/Header/index.jsx","constants/routes.js","components/AlbumItem/index.jsx","components/AlbumContainer/index.jsx","pages/Home/index.jsx","utils/index.js","pages/Artist/index.jsx","App.jsx","index.jsx"],"names":["activeConfig","baseURL","axiosInstance","axios","create","AlbumsContext","createContext","albums","searchTerm","toggleFavorite","albumId","props","useState","setAlbums","setSearchTerm","Provider","value","updatedAlbums","albumIndex","findIndex","album","id","newFavoriteStatus","favorite","url","patch","then","res","data","catch","err","console","error","children","Search","albumsContext","useContext","className","onSubmit","event","preventDefault","type","placeholder","onChange","target","Header","to","title","hasSearch","onSearchChange","AlbumItem","resolveFavoriteCta","onClick","src","imageUrl","alt","artistId","artistName","Date","releaseDate","getFullYear","price","AlbumContainer","map","key","artist","Home","urlParams","useLocation","search","useEffect","searchParams","URLSearchParams","limit","parseInt","get","query","length","resolveApiUrl","response","Artist","useParams","currentArtistAlbums","filter","Number","log","App","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93831379.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport config from '../config'\r\n\r\nconst activeConfig = config[process.env.NODE_ENV];\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: activeConfig.baseURL\r\n});\r\n\r\nexport default axiosInstance;\r\n","export default {\r\n    development: {\r\n        baseURL: 'http://localhost:3004'\r\n    },\r\n    production: {\r\n        baseURL: 'https://albums-mock-backend.glitch.me'\r\n    }\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nimport axios from '../../axios';\r\nimport * as api from '../../constants/api';\r\n\r\nexport const AlbumsContext = createContext({\r\n    albums: [],\r\n    searchTerm: '',\r\n    toggleFavorite: albumId => {}\r\n});\r\n\r\nexport default (props) => {\r\n    const [albums, setAlbums] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const toggleFavorite = albumId => {\r\n        const updatedAlbums = [...albums];\r\n        const albumIndex = albums.findIndex(album => album.id === albumId);\r\n        const newFavoriteStatus = !albums[albumIndex].favorite;\r\n\r\n        const url = `${api.FAVORITE}/${albumId}`;\r\n        axios.patch(url, { favorite: newFavoriteStatus }).then(res => {\r\n            updatedAlbums[albumIndex].favorite = res.data.favorite;\r\n            setAlbums(updatedAlbums)\r\n        }).catch(err => {\r\n            console.error(err);\r\n        });\r\n            \r\n    };\r\n\r\n    return (\r\n        <AlbumsContext.Provider value={{ albums, setAlbums, searchTerm, setSearchTerm, toggleFavorite }}>\r\n            {props.children}\r\n        </AlbumsContext.Provider>\r\n    );\r\n};\r\n","export const ALBUMS = '/albums?_expand=artist';\r\nexport const FAVORITE = '/albums';","import React, { useContext } from 'react';\r\n\r\nimport { AlbumsContext } from '../../context/albums/albumsContext';\r\n\r\nimport './style.scss';\r\n\r\nfunction Search() {\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const {searchTerm, setSearchTerm} = albumsContext;\r\n\r\n    return (\r\n        <div className=\"search-container\">\r\n            <form onSubmit={event => event.preventDefault()}>\r\n                <input type=\"text\" placeholder=\"Search\" onChange={ event => setSearchTerm(event.target.value)} value={searchTerm} />\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Search from '../Search';\r\n\r\nimport * as routes from '../../constants/routes';\r\n\r\nimport './style.scss';\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"inner-container\">\r\n                <h1 className=\"page-title\">\r\n                    <Link to={routes.HOME} title=\"Home\">\r\n                        {props.title}\r\n                    </Link>\r\n                </h1>\r\n                {props.hasSearch ? <Search onSearchChange={props.onSearchChange} /> : null}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nHeader.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    hasSearch: PropTypes.bool,\r\n    onSearchChange: PropTypes.func\r\n};\r\n\r\nexport default Header;\r\n","export const HOME = '/';\r\nexport const ARTIST_ROOT = '/artist'\r\nexport const ARTIST = '/artist/:artistId'","import React, { useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport * as routes from '../../constants/routes';\r\n\r\nimport { AlbumsContext } from '../../context/albums/albumsContext';\r\n\r\nimport './style.scss';\r\n\r\nfunction AlbumItem(props) {\r\n    const toggleFavorite = useContext(AlbumsContext).toggleFavorite;\r\n\r\n    const getYear = () => {\r\n        return new Date(props.releaseDate).getFullYear();\r\n    };\r\n\r\n    const resolveFavoriteCta = props.favorite ? (\r\n        <button className=\"remove-favorite\" onClick={() => toggleFavorite(props.id)}>\r\n            Remove favorite\r\n        </button>\r\n    ) : (\r\n        <button className=\"add-favorite\" onClick={() => toggleFavorite(props.id)}>\r\n            Mark as favorite\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <div className=\"album-item\">\r\n            <div className=\"album-main-info\">\r\n                <div className={`album-cover-container${props.favorite ? ' has-star' : ''}`}>\r\n                    <img src={props.imageUrl} alt={`${props.title} album cover.`} className=\"album-cover\" />\r\n                </div>\r\n                <div className=\"name-title-container\">\r\n                    <div className=\"album-title\">{props.title}</div>\r\n                    \r\n                        <Link\r\n                            to={`${routes.ARTIST_ROOT}/${props.artistId}`}\r\n                            title={`View all albums from ${props.artistName}`}\r\n                            className=\"album-artist\"\r\n                        >\r\n                            {props.artistName}\r\n                        </Link>\r\n                    \r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"year-info\">\r\n                <span className=\"year-label\">Released: </span>\r\n                <span className=\"year-value\">{getYear()}</span>\r\n            </div>\r\n\r\n            <div className=\"price\">{props.price}</div>\r\n\r\n            <div className=\"favorite-container\">{resolveFavoriteCta}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nAlbumItem.propTypes = {\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    price: PropTypes.string,\r\n    imageUrl: PropTypes.string,\r\n    releaseDate: PropTypes.string,\r\n    favorite: PropTypes.bool,\r\n    artistId: PropTypes.number,\r\n    artistName: PropTypes.string\r\n};\r\n\r\nexport default AlbumItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './style.scss';\r\nimport AlbumItem from '../AlbumItem';\r\n\r\nfunction AlbumContainer(props) {\r\n    const renderAlbums = () => {\r\n        return props.albums.map((album) => (\r\n            <AlbumItem\r\n                key={album.id}\r\n                {...album}\r\n                artistName={album.artist.title}\r\n            />\r\n        ));\r\n    };\r\n    return <div className=\"album-container\">{renderAlbums()}</div>;\r\n}\r\n\r\nAlbumContainer.propTypes = {\r\n    albums: PropTypes.array\r\n};\r\n\r\nexport default AlbumContainer;\r\n","import React, { useEffect, useContext } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { AlbumsContext } from '../../context/albums/albumsContext';\r\n\r\nimport Header from '../../components/Header';\r\nimport AlbumContainer from '../../components/AlbumContainer';\r\n\r\nimport axios from '../../axios';\r\nimport { resolveApiUrl } from '../../utils';\r\n\r\nimport './style.scss';\r\n\r\nfunction Home() {\r\n    const urlParams = useLocation().search;\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const { albums, setAlbums, searchTerm } = albumsContext;\r\n    \r\n    useEffect(() => {\r\n        const url = resolveApiUrl(urlParams, searchTerm);\r\n        axios\r\n            .get(url)\r\n            .then((response) => {\r\n                setAlbums(response.data);\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n            });\r\n    }, [searchTerm, urlParams, setAlbums]);\r\n\r\n    return (\r\n        <div>\r\n            <Header title=\"Album list\" hasSearch />\r\n            {albums.length ? (\r\n                <AlbumContainer albums={albums} />\r\n            ) : (\r\n                <div className=\"no-results\">\r\n                    No results found for <span className=\"search-term\">{searchTerm}</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","import * as api from '../constants/api';\r\n\r\nconst DEFAULT_LIMIT = 10;\r\n\r\nconst resolveApiUrl = (urlParams, searchTerm) => {\r\n    const searchParams = new URLSearchParams(urlParams);\r\n    const limit = parseInt(searchParams.get('limit')) || DEFAULT_LIMIT;\r\n\r\n    const query = searchTerm.length ? `&q=${searchTerm}` : '';\r\n\r\n    return `${api.ALBUMS}&_limit=${limit}${query}`;\r\n};\r\n\r\nexport { resolveApiUrl };","import React, { useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { AlbumsContext } from '../../context/albums/albumsContext';\r\n\r\nimport Header from '../../components/Header';\r\nimport AlbumContainer from '../../components/AlbumContainer';\r\n\r\nfunction Artist() {\r\n    const { artistId } = useParams();\r\n    const albumsContext = useContext(AlbumsContext);\r\n    const { albums } = albumsContext;\r\n\r\n    const currentArtistAlbums = albums.filter((album) => album.artistId === Number(artistId));\r\n    \r\n    if (currentArtistAlbums.length) {\r\n        console.log(currentArtistAlbums)\r\n        const artistName = currentArtistAlbums[0].artist.title;\r\n        return (\r\n            <div>\r\n                <Header title={artistName} />\r\n                <AlbumContainer albums={currentArtistAlbums} />\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div>\r\n                <Header title=\"Unknown artist\" />\r\n                <div className=\"no-results\">\r\n                    No results found for artist with ID of <strong>{artistId}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default Artist;\r\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport Home from './pages/Home';\nimport Artist from './pages/Artist';\n\nimport * as routes from './constants/routes';\n\nfunction App() {\n    return (\n        <div className=\"app\">\n            <Switch>\n                <Route path={routes.ARTIST} component={Artist} />\n                <Route path={routes.HOME} component={Home} />\n            </Switch>\n        </div>\n    );\n}\n\nexport default App;\n","import './utils/polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport AlbumsProvider from './context/albums/albumsContext';\n\nimport './index.scss';\n\nReactDOM.render(\n    <React.StrictMode>\n        <AlbumsProvider>\n            <BrowserRouter>\n                <App />\n            </BrowserRouter>\n        </AlbumsProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}